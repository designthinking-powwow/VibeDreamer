
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibe Dreamer - ä½ çš„ Vibe Coding éˆæ„Ÿç™¼å°„å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&family=Noto+Sans+TC:wght@400;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans TC', sans-serif; background-color: #f8fafc; margin: 0; padding: 0; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .floating { animation: float 3s ease-in-out infinite; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c7d2fe; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #818cf8; }
    </style>
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom": "https://esm.sh/react-dom@^19.2.3",
    "react-dom/client": "https://esm.sh/react-dom@^19.2.3/client",
    "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useCallback } from 'react';
        import ReactDOM from 'react-dom/client';
        import { GoogleGenAI } from "@google/genai";

        // --- Types & Constants ---
        const ROLES_MAP = {
            'å…¨ç«¯å·¥ç¨‹å¸«': { label: 'è¬èƒ½é–‹ç™¼è€…', emoji: 'ğŸ§™â€â™‚ï¸' },
            'UIè¨­è¨ˆå¸«': { label: 'ç¾æ„Ÿè¦–è¦ºå¤§å¸«', emoji: 'ğŸ¨' },
            'å‰ç«¯é–‹ç™¼è€…': { label: 'äº’å‹•é­”æ³•å¸«', emoji: 'âœ¨' },
            'å¾Œç«¯å°ˆå®¶': { label: 'æ•¸æ“šå®ˆè­·è€…', emoji: 'ğŸ§ ' },
            'Pythonå°ˆå®¶': { label: 'è‡ªå‹•åŒ–å°ˆå®¶', emoji: 'ğŸ' },
            'ç”¢å“ç¶“ç†': { label: 'å‰µæ„å°èˆªå“¡', emoji: 'ğŸ—ºï¸' }
        };

        const STYLES = ['æ¥µç°¡', 'æ·±è‰²', 'å¯æ„›é¢¨', 'è³½åšé¾å…‹', 'å•†å‹™å°ˆæ¥­', 'å¾©å¤é¢¨'];
        const PLATFORMS = ['Web ç¶²é ', 'Mobile App', 'Android', 'iOS', 'Desktop æ¡Œé¢ç¨‹å¼'];
        const RANDOM_IDEAS = ["ä¸€å€‹å°ˆç‚ºè²“å’ªè¨­è¨ˆçš„ 21 å¤©é‹å‹•è¨ˆåŠƒè¡¨", "ç²¾ç·»çš„å¾©å¤é»‘è† å”±ç‰‡ç·šä¸Šæ’­æ”¾å™¨", "å……æ»¿æœªä¾†æ„Ÿçš„å€‹äººç•ªèŒ„é˜è¨ˆæ™‚å™¨", "éœ“è™¹é¢¨æ ¼çš„å³æ™‚åŠ å¯†è²¨å¹£çœ‹æ¿"];
        const COMMON_FEATURES = [
            { id: 'auth', label: 'è¦æœ‰å°ˆå±¬å¸³è™Ÿç™»å…¥', emoji: 'ğŸ”‘' },
            { id: 'responsive', label: 'æ‰‹æ©Ÿé›»è…¦çœ‹èµ·ä¾†éƒ½å¾ˆå®Œç¾', emoji: 'ğŸ“±' },
            { id: 'darkmode', label: 'æä¾›å¸¥æ°£çš„é»‘å¤œæ¨¡å¼', emoji: 'ğŸŒ™' },
            { id: 'db', label: 'èƒ½è‡ªå‹•è¨˜ä½è¼¸å…¥çš„å…§å®¹', emoji: 'ğŸ’¾' }
        ];

        // --- Components ---
        const Tooltip = ({ text }) => {
            const [show, setShow] = useState(false);
            return (
                <div className="relative inline-block ml-1">
                    <div 
                        onMouseEnter={() => setShow(true)}
                        onMouseLeave={() => setShow(false)}
                        className="cursor-help inline-flex items-center justify-center w-4 h-4 rounded-full bg-slate-200 text-slate-500 text-[10px] font-bold hover:bg-indigo-200 hover:text-indigo-600 transition-colors"
                    >?</div>
                    {show && (
                        <div className="absolute z-50 w-48 px-3 py-2 mt-2 text-xs font-medium text-white bg-slate-800 rounded-xl shadow-xl -left-20 sm:left-0">
                            {text}
                            <div className="absolute top-0 left-1/2 -mt-1 h-2 w-2 -translate-x-1/2 rotate-45 bg-slate-800"></div>
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [showSettings, setShowSettings] = useState(false);
            const [customApiKey, setCustomApiKey] = useState(() => localStorage.getItem('vibe_dreamer_api_key') || '');
            const [progress, setProgress] = useState(0);
            const [form, setForm] = useState({
                roles: ['å…¨ç«¯å·¥ç¨‹å¸«'],
                task: '',
                platform: 'Web ç¶²é ',
                style: 'æ¥µç°¡',
                features: '',
                selectedCommonFeatures: [],
                language: 'ç¹é«”ä¸­æ–‡'
            });

            const [analyzeUrl, setAnalyzeUrl] = useState('');
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [analysisError, setAnalysisError] = useState(null);
            const [generatedPrompt, setGeneratedPrompt] = useState('');
            const [copySuccess, setCopySuccess] = useState(false);

            useEffect(() => {
                let p = 0;
                if (form.task) p += 30;
                if (form.roles.length > 0) p += 20;
                if (form.selectedCommonFeatures.length > 0) p += 20;
                if (form.features) p += 30;
                setProgress(p);
            }, [form]);

            useEffect(() => {
                const roleString = form.roles.map(r => ROLES_MAP[r]?.label || r).join(' èˆ‡ ');
                const combinedFeatures = [
                    ...form.selectedCommonFeatures.map(id => COMMON_FEATURES.find(f => f.id === id)?.label),
                    form.features
                ].filter(Boolean).join('ã€');

                const prompt = `ä½ ç¾åœ¨æ˜¯æˆ‘çš„å°ˆå±¬ ${roleString}ã€‚
æˆ‘æƒ³è¦é–‹ç™¼ä¸€å€‹è¶…é…·çš„é»å­å«åšã€Œ${form.task || 'æˆ‘çš„å¤¢æƒ³å°ˆæ¡ˆ'}ã€ã€‚
ã€é–‹ç™¼ç›®æ¨™ã€‘é€™æ˜¯ä¸€å€‹åœ¨ ${form.platform} ä¸Šé‹è¡Œçš„ç”¢å“ã€‚
ã€è¨­è¨ˆé¢¨æ ¼ã€‘è¦–è¦ºæ°£è³ªï¼š${form.style}ã€‚
ã€æ ¸å¿ƒåŠŸèƒ½ã€‘å‹™å¿…å¯¦ç¾ï¼š${combinedFeatures || 'åŸºç¤äº¤äº’é‚è¼¯'}ã€‚
ã€è¦æ±‚ã€‘1. å–®ä¸€ index.html æª”æ¡ˆè¼¸å‡ºã€‚ 2. ä½¿ç”¨ ${form.language} ä¸¦å«è¨»é‡‹ã€‚ 3. ä½¿ç”¨ Tailwind CSSã€‚`;
                setGeneratedPrompt(prompt);
            }, [form]);

            const handleCopy = async () => {
                await navigator.clipboard.writeText(generatedPrompt);
                setCopySuccess(true);
                setTimeout(() => setCopySuccess(false), 3000);
            };

            const toggleRole = (role) => {
                setForm(prev => ({
                    ...prev,
                    roles: prev.roles.includes(role) 
                        ? (prev.roles.length > 1 ? prev.roles.filter(r => r !== role) : prev.roles)
                        : [...prev.roles, role]
                }));
            };

            const handleAIAnalysis = async () => {
                const apiKey = customApiKey || ""; 
                if (!apiKey) { setShowSettings(true); return; }
                setIsAnalyzing(true); setAnalysisError(null);
                try {
                    const ai = new GoogleGenAI({ apiKey });
                    const response = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: `åˆ†ææ­¤ç¶²é ä¸¦è½‰åŒ–ç‚ºé–‹ç™¼åƒæ•¸ï¼š${analyzeUrl}ã€‚å›å‚³ JSON: {task, style, features}`,
                    });
                    const result = JSON.parse(response.text.match(/\{[\s\S]*\}/)[0]);
                    setForm(prev => ({ ...prev, task: result.task, style: 'è‡ªå®šç¾©', features: result.features }));
                } catch (e) { setAnalysisError("åˆ†æå¤±æ•—ï¼Œè«‹æª¢æŸ¥ API Key æˆ–ç¶²å€ã€‚"); }
                finally { setIsAnalyzing(false); }
            };

            return (
                <div className="min-h-screen bg-slate-50 py-16 px-4">
                    <div className="fixed top-0 left-0 w-full h-1.5 bg-slate-200 z-[100]">
                        <div className="h-full bg-gradient-to-r from-indigo-500 to-pink-500 transition-all duration-700 shadow-[0_0_15px_rgba(99,102,241,0.6)]" style={{ width: `${progress}%` }}></div>
                    </div>

                    <div className="fixed top-6 right-6 z-[90]">
                        <button onClick={() => setShowSettings(true)} className="p-3 bg-white/80 backdrop-blur-md border border-slate-200 rounded-2xl shadow-sm hover:border-indigo-300 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        </button>
                    </div>

                    {showSettings && (
                        <div className="fixed inset-0 z-[200] flex items-center justify-center p-4">
                            <div className="absolute inset-0 bg-slate-900/40 backdrop-blur-sm" onClick={() => setShowSettings(false)}></div>
                            <div className="relative bg-white rounded-[2.5rem] shadow-2xl w-full max-w-md p-8">
                                <h3 className="text-2xl font-black mb-2 text-indigo-600">é­”æ³•é‡‘é‘°è¨­å®š</h3>
                                <input type="password" value={customApiKey} onChange={(e) => setCustomApiKey(e.target.value)} placeholder="åœ¨æ­¤è²¼ä¸Šä½ çš„ API Key..." className="w-full rounded-2xl bg-slate-50 border-2 border-transparent py-4 px-6 outline-none focus:border-indigo-400 mb-6 font-mono text-sm" />
                                <button onClick={() => window.open('https://aistudio.google.com/app/apikey', '_blank')} className="w-full py-4 rounded-2xl border-2 border-indigo-100 text-indigo-600 font-black text-sm mb-4 hover:bg-indigo-50 transition-all">ğŸš€ é»æˆ‘ç”³è«‹å…è²» API Key</button>
                                <button onClick={() => { localStorage.setItem('vibe_dreamer_api_key', customApiKey); setShowSettings(false); }} className="w-full py-4 bg-indigo-600 text-white rounded-2xl font-black shadow-lg">ç¢ºèªä¸¦å„²å­˜</button>
                            </div>
                        </div>
                    )}

                    <div className="max-w-4xl mx-auto">
                        <header className="text-center mb-16">
                            <h1 className="text-5xl font-black text-slate-900">Vibe <span className="text-indigo-600">Dreamer</span></h1>
                            <p className="mt-4 text-slate-500 font-medium">æŠŠä½ çš„æ„Ÿè¦º (Vibe)ï¼Œè®ŠæˆçœŸå¯¦çš„ç¨‹å¼ç¢¼ã€‚</p>
                        </header>

                        <div className="bg-white rounded-[3rem] p-10 shadow-2xl mb-12 border border-indigo-50/50 relative overflow-hidden">
                            <h3 className="text-xl font-bold text-slate-800 mb-6 text-center">è®“ AI å¹«ä½ è§£æç¶²é éˆé­‚</h3>
                            <div className="flex flex-col sm:flex-row gap-4 max-w-2xl mx-auto">
                                <input type="text" placeholder="è²¼ä¸Šç¶²å€..." className="flex-1 px-6 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:border-indigo-300 outline-none" value={analyzeUrl} onChange={(e) => setAnalyzeUrl(e.target.value)} />
                                <button onClick={handleAIAnalysis} disabled={isAnalyzing} className="px-10 py-4 bg-indigo-600 text-white font-black rounded-2xl hover:bg-indigo-700 disabled:opacity-50">{isAnalyzing ? "é­”æ³•è§£æä¸­..." : "å•Ÿå‹•é­”æ³•"}</button>
                            </div>
                            {analysisError && <p className="text-center mt-4 text-indigo-400 text-xs font-bold">{analysisError}</p>}
                        </div>

                        <div className="space-y-12">
                            <section className="bg-white rounded-[3rem] p-10 shadow-sm border border-slate-100">
                                <h2 className="text-2xl font-black text-slate-800 mb-10 flex items-center">
                                    <span className="w-12 h-12 rounded-2xl bg-indigo-600 text-white flex items-center justify-center mr-4 shadow-lg">1</span>
                                    ç¬¬ä¸€ç« ï¼šé»å­çš„éˆé­‚ <Tooltip text="åœ¨é€™è£¡æè¿°ä½ çš„æ ¸å¿ƒé»å­"/>
                                </h2>
                                <div className="space-y-10">
                                    <div>
                                        <label className="text-sm font-black text-slate-600 uppercase mb-4 block">çµ¦é»å­å–å€‹åå­—</label>
                                        <input type="text" value={form.task} onChange={(e) => setForm({...form, task: e.target.value})} placeholder="ä¾‹å¦‚ï¼šå……æ»¿ç¦ªæ„çš„æ‰“åè¨ˆæ™‚å™¨" className="w-full rounded-2xl bg-slate-50 py-5 px-7 focus:bg-white border-2 border-transparent focus:border-indigo-400 outline-none font-bold text-lg transition-all" />
                                    </div>
                                    <div>
                                        <label className="text-sm font-black text-slate-600 uppercase mb-4 block">èª°ä¾†å¹«ä½ å¯¦ç¾ï¼Ÿ</label>
                                        <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
                                            {Object.entries(ROLES_MAP).map(([key, data]) => (
                                                <button key={key} onClick={() => toggleRole(key)} className={`p-4 rounded-3xl border-2 transition-all text-left flex flex-col gap-2 ${form.roles.includes(key) ? 'bg-indigo-600 border-indigo-600 text-white shadow-xl scale-105' : 'bg-white border-slate-100 text-slate-400'}`}>
                                                    <span className="text-2xl">{data.emoji}</span>
                                                    <span className="text-xs font-black">{data.label}</span>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section className="bg-white rounded-[3rem] p-10 shadow-sm border border-slate-100">
                                <h2 className="text-2xl font-black text-slate-800 mb-10 flex items-center">
                                    <span className="w-12 h-12 rounded-2xl bg-indigo-600 text-white flex items-center justify-center mr-4 shadow-lg">2</span>
                                    ç¬¬äºŒç« ï¼šå…·é«”åŠŸèƒ½
                                </h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
                                    {COMMON_FEATURES.map(f => (
                                        <label key={f.id} className={`flex items-center p-6 rounded-3xl border-2 cursor-pointer transition-all ${form.selectedCommonFeatures.includes(f.id) ? 'bg-indigo-50 border-indigo-200' : 'border-slate-50'}`}>
                                            <input type="checkbox" checked={form.selectedCommonFeatures.includes(f.id)} onChange={() => setForm(prev => ({ ...prev, selectedCommonFeatures: prev.selectedCommonFeatures.includes(f.id) ? prev.selectedCommonFeatures.filter(id => id !== f.id) : [...prev.selectedCommonFeatures, f.id]}))} className="h-6 w-6 text-indigo-600" />
                                            <span className="ml-4 text-sm font-bold text-slate-700">{f.emoji} {f.label}</span>
                                        </label>
                                    ))}
                                </div>
                                <textarea rows={4} value={form.features} onChange={(e) => setForm({...form, features: e.target.value})} placeholder="é‚„æœ‰ä»€éº¼ç‰¹åˆ¥é¡˜æœ›ï¼Ÿ" className="w-full rounded-[2rem] bg-slate-50 py-6 px-8 outline-none focus:border-indigo-400 border-2 border-transparent transition-all" />
                            </section>

                            <section className="bg-[#111] rounded-[3.5rem] shadow-2xl overflow-hidden p-12">
                                <div className="bg-white/5 rounded-[2.5rem] p-8 border border-white/5 min-h-[200px] font-mono text-indigo-100/80 text-xs leading-relaxed whitespace-pre-wrap mb-10">
                                    {generatedPrompt}
                                </div>
                                <button onClick={handleCopy} className={`w-full py-6 rounded-3xl font-black text-lg transition-all ${copySuccess ? 'bg-green-500 text-white' : 'bg-indigo-600 text-white shadow-xl shadow-indigo-900/40'}`}>
                                    {copySuccess ? "âœ¨ è¤‡è£½æˆåŠŸï¼" : "æ‹¿èµ°é€™ä»½é­”æ³•æŒ‡ä»¤"}
                                </button>
                            </section>
                        </div>

                        <footer className="mt-32 text-center text-slate-300 text-[10px] font-black uppercase tracking-[0.5em]">
                            Vibe Dreamer v6.0 â€” Portable & Fast
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
